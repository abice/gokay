{{/*
  dive will call gokay validate on a struct
  */}}
{{define "dive"}}
{{ if or (isStruct .) (isStructPtr .)}}
{{ if IsPtr . }}if s.{{.FieldName}} != nil { {{- end}}
if err := gokay.Validate(s.{{.FieldName}}); err != nil {
  {{ AddError . "err" }}
}
{{ if IsPtr . }}}{{end}}
{{ else }}
{{ GenerationError (printf "Dive is not valid on field '%s %s'" .FieldName .FieldType) }}
{{end}}
{{end -}}
